<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/FCJ-report-HUGO-SE192671/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=FCJ-report-HUGO-SE192671/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.150.0">
    <meta name="generator" content="Relearn 8.1.1+9d74be278d6e8456f2f18305c9b27e38bc2de91c">
    <meta name="description" content="AWS PrivateLink endpoints have a fixed IP address in each Availability Zone where they are deployed, for the life of the endpoint (until it is deleted). These IP addresses are attached to Elastic Network Interfaces (ENIs). AWS recommends using DNS to resolve the IP addresses for endpoints so that downstream applications use the latest IP addresses when ENIs are added to new AZs, or deleted over time.
In this section, you will create a forwarding rule to send DNS resolution requests from a simulated on-premises environment to a Route 53 Private Hosted Zone. This section leverages the infrastructure deployed by CloudFormation in the Prepare the environment section.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="On-premises DNS Simulation :: AWS Intership Report">
    <meta name="twitter:description" content="AWS PrivateLink endpoints have a fixed IP address in each Availability Zone where they are deployed, for the life of the endpoint (until it is deleted). These IP addresses are attached to Elastic Network Interfaces (ENIs). AWS recommends using DNS to resolve the IP addresses for endpoints so that downstream applications use the latest IP addresses when ENIs are added to new AZs, or deleted over time.
In this section, you will create a forwarding rule to send DNS resolution requests from a simulated on-premises environment to a Route 53 Private Hosted Zone. This section leverages the infrastructure deployed by CloudFormation in the Prepare the environment section.">
    <meta property="og:url" content="http://localhost:1313/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html">
    <meta property="og:site_name" content="AWS Intership Report">
    <meta property="og:title" content="On-premises DNS Simulation :: AWS Intership Report">
    <meta property="og:description" content="AWS PrivateLink endpoints have a fixed IP address in each Availability Zone where they are deployed, for the life of the endpoint (until it is deleted). These IP addresses are attached to Elastic Network Interfaces (ENIs). AWS recommends using DNS to resolve the IP addresses for endpoints so that downstream applications use the latest IP addresses when ENIs are added to new AZs, or deleted over time.
In this section, you will create a forwarding rule to send DNS resolution requests from a simulated on-premises environment to a Route 53 Private Hosted Zone. This section leverages the infrastructure deployed by CloudFormation in the Prepare the environment section.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="On-premises DNS Simulation :: AWS Intership Report">
    <meta itemprop="description" content="AWS PrivateLink endpoints have a fixed IP address in each Availability Zone where they are deployed, for the life of the endpoint (until it is deleted). These IP addresses are attached to Elastic Network Interfaces (ENIs). AWS recommends using DNS to resolve the IP addresses for endpoints so that downstream applications use the latest IP addresses when ENIs are added to new AZs, or deleted over time.
In this section, you will create a forwarding rule to send DNS resolution requests from a simulated on-premises environment to a Route 53 Private Hosted Zone. This section leverages the infrastructure deployed by CloudFormation in the Prepare the environment section.">
    <meta itemprop="wordCount" content="682">
    <title>On-premises DNS Simulation :: AWS Intership Report</title>
    <link href="http://localhost:1313/FCJ-report-HUGO-SE192671/workshop/4-s3-onprem/4.4-dns-simulation/index.html" rel="alternate" hreflang="x-default">
    <link href="http://localhost:1313/FCJ-report-HUGO-SE192671/workshop/4-s3-onprem/4.4-dns-simulation/index.html" rel="alternate" hreflang="vi">
    <link href="http://localhost:1313/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html" rel="alternate" hreflang="en">
    <link href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.xml" rel="alternate" type="application/rss+xml" title="On-premises DNS Simulation :: AWS Intership Report">
    <link href="/FCJ-report-HUGO-SE192671/images/favicon.png?1764929016" rel="icon" type="image/png">
    <link href="/FCJ-report-HUGO-SE192671/css/auto-complete/auto-complete.min.css?1764929016" rel="stylesheet">
    <script src="/FCJ-report-HUGO-SE192671/js/auto-complete/auto-complete.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/search-lunr.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/search.js?1764929016" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/FCJ-report-HUGO-SE192671/searchindex.en.js?1764929016";
    </script>
    <script src="/FCJ-report-HUGO-SE192671/js/lunr/lunr.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/lunr/lunr.stemmer.support.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/lunr/lunr.multi.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/lunr/lunr.en.min.js?1764929016" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/FCJ-report-HUGO-SE192671/fonts/fontawesome/css/fontawesome-all.min.css?1764929016" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/FCJ-report-HUGO-SE192671/fonts/fontawesome/css/fontawesome-all.min.css?1764929016" rel="stylesheet"></noscript>
    <link href="/FCJ-report-HUGO-SE192671/css/perfect-scrollbar/perfect-scrollbar.min.css?1764929016" rel="stylesheet">
    <link href="/FCJ-report-HUGO-SE192671/css/theme.css?1764929016" rel="stylesheet">
    <link href="/FCJ-report-HUGO-SE192671/css/format-html.css?1764929016" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/en\/workshop\/4-s3-onprem\/4.4-dns-simulation\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313\/FCJ-report-HUGO-SE192671';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'workshop' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/FCJ-report-HUGO-SE192671/en/index.html"><span itemprop="name">Home</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/FCJ-report-HUGO-SE192671/en/workshop/index.html"><span itemprop="name">5. Workshop</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/index.html"><span itemprop="name">Access S3 from on-premises</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">On-premises DNS Simulation</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.3-test-endpoint/index.html" title="Test the Interface Endpoint (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/FCJ-report-HUGO-SE192671/en/workshop/5-policy/index.html" title="VPC Endpoint Policies (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable page" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="on-premises-dns-simulation">On-premises DNS Simulation</h1>

<p>AWS PrivateLink endpoints have a fixed IP address in each Availability Zone where they are deployed, for the life of the
endpoint (until it is deleted). These IP addresses are attached to Elastic Network Interfaces (ENIs). AWS recommends
using DNS to resolve the IP addresses for endpoints so that downstream applications use the latest IP addresses when
ENIs are added to new AZs, or deleted over time.</p>
<p>In this section, you will create a forwarding rule to send DNS resolution requests from a simulated on-premises
environment to a Route 53 Private Hosted Zone. This section leverages the infrastructure deployed by CloudFormation in
the Prepare the environment section.</p>
<h4 id="create-dns-alias-records-for-the-interface-endpoint">Create DNS Alias Records for the Interface endpoint</h4>
<ol>
<li>Navigate to
the <a href="https://us-east-1.console.aws.amazon.com/route53/v2/hostedzones?region=us-east-1" rel="external">Route 53 management console</a> (
Hosted Zones section). The CloudFormation template you deployed in the Prepare the environment section created this
Private Hosted Zone. Click on the name of the Private Hosted Zone, s3.us-east-1.amazonaws.com:</li>
</ol>
<p><a href="#R-image-c7c287f8a93f5978b09dcd553fdd384b" class="lightbox-link"><img alt="hosted zone" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/hosted-zone.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c7c287f8a93f5978b09dcd553fdd384b"><img alt="hosted zone" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/hosted-zone.png"></a></p>
<ol start="2">
<li>Create a new record in the Private Hosted Zone:</li>
</ol>
<p><a href="#R-image-d60ed8df4a1362769e9029f519813673" class="lightbox-link"><img alt="Create record" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/create-record1.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d60ed8df4a1362769e9029f519813673"><img alt="Create record" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/create-record1.png"></a></p>
<ul>
<li>Record name and record type keep default options</li>
<li>Alias Button: Click to enable</li>
<li>Route traffic to: Alias to VPC Endpoint</li>
<li>Region: US East (N. Virginia) [us-east-1]</li>
<li>Choose endpoint: Paste the Regional VPC Endpoint DNS name from your text editor (you saved when doing section 4.3)</li>
</ul>
<p><a href="#R-image-e4859e8ae64558e7a472fb905b2aaff0" class="lightbox-link"><img alt="record1" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/record1.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e4859e8ae64558e7a472fb905b2aaff0"><img alt="record1" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/record1.png"></a></p>
<ol start="3">
<li>Click Add another record, and add a second record using the following values. Click Create records when finished to
create both records.</li>
</ol>
<ul>
<li>Record name: *.</li>
<li>Record type: keep default value (type A)</li>
<li>Alias Button: Click to enable</li>
<li>Route traffic to: Alias to VPC Endpoint</li>
<li>Region: US East (N. Virginia) [us-east-1]</li>
<li>Choose endpoint: Paste the Regional VPC Endpoint DNS name from your text editor</li>
</ul>
<p><a href="#R-image-e5dccc65754d2445f916f200a81b1212" class="lightbox-link"><img alt="record 2" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/record2.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e5dccc65754d2445f916f200a81b1212"><img alt="record 2" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/record2.png"></a></p>
<p>The new records appear in the Route 53 console:</p>
<p><a href="#R-image-7b282722c20630a0cb3906d320c0f8ff" class="lightbox-link"><img alt="result" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/result.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7b282722c20630a0cb3906d320c0f8ff"><img alt="result" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/result.png"></a></p>
<h4 id="create-a-resolver-forwarding-rule">Create a Resolver Forwarding Rule</h4>
<p>Route 53 Resolver Forwarding Rules allow you to forward DNS queries from your VPC to other sources for name resolution.
Outside of a workshop environment, you might use this feature to forward DNS queries from your VPC to DNS servers
running on-premises. In this section, you will simulate an on-premises conditional forwarder by creating a forwarding
rule that forwards DNS queries for Amazon S3 to a Private Hosted Zone running in &ldquo;VPC Cloud&rdquo; in-order to resolve the
PrivateLink interface endpoint regional DNS name.</p>
<ol>
<li>From the Route 53 management console, click <strong>Inbound endpoints</strong> on the left side bar</li>
<li>In the Inbound endpoints console, click the ID of the inbound endpoint</li>
</ol>
<p><a href="#R-image-b0f2d40b88e61f017b6a1c17ef49f6bd" class="lightbox-link"><img alt="Inbound endpoint" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-1.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b0f2d40b88e61f017b6a1c17ef49f6bd"><img alt="Inbound endpoint" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-1.png"></a></p>
<ol start="3">
<li>Copy the two IP addresses listed to your text editor</li>
</ol>
<p><a href="#R-image-b639026607a99da09833a7c5eb57f99c" class="lightbox-link"><img alt="Ip addresses" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-2.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b639026607a99da09833a7c5eb57f99c"><img alt="Ip addresses" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-2.png"></a></p>
<ol start="4">
<li>From the Route 53 menu, choose <strong>Resolver</strong> &gt; <strong>Rules</strong>, and click <strong>Create rule</strong>:</li>
</ol>
<p><a href="#R-image-a1818df8e11a7f7e61f1284cdffba5ef" class="lightbox-link"><img alt="Ip addresses" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-3.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a1818df8e11a7f7e61f1284cdffba5ef"><img alt="Ip addresses" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-3.png"></a></p>
<ol start="5">
<li>In the Create rule console:</li>
</ol>
<ul>
<li>Name: myS3Rule</li>
<li>Rule type: Forward</li>
<li>Domain name: s3.us-east-1.amazonaws.com</li>
</ul>
<p><a href="#R-image-cd18e5c249bffba679470e5043ce618f" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-4.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cd18e5c249bffba679470e5043ce618f"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-4.png"></a></p>
<ul>
<li>VPC: VPC On-prem</li>
<li>Outbound endpoint: VPCOnpremOutboundEndpoint</li>
</ul>
<p><a href="#R-image-6a2f68c22e8ffdc2d70ee8643a6904eb" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-5.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6a2f68c22e8ffdc2d70ee8643a6904eb"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-5.png"></a></p>
<ul>
<li>Target IP Addresses: Enter both IP addresses from your text editor (inbound endpoint addresses) and then click Submit</li>
</ul>
<p><a href="#R-image-ee9f97aafae27253a6453c9f34edebbf" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-6.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ee9f97aafae27253a6453c9f34edebbf"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-6.png"></a>
You have successfully created resolver forwarding rule.</p>
<p><a href="#R-image-8a557de7489d0c5b6db25a0c2143291c" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-7.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8a557de7489d0c5b6db25a0c2143291c"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/route53-7.png"></a></p>
<h4 id="test-the-on-premises-dns-simulation">Test the on-premises DNS Simulation</h4>
<ol>
<li>Connect to <strong>Test-Interface-Endpoint EC2 instance</strong> with <strong>Session manager</strong></li>
</ol>
<p><a href="#R-image-fae6a353a358e3244a3257be61e8e011" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/test1.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fae6a353a358e3244a3257be61e8e011"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/test1.png"></a></p>
<ol start="2">
<li>Test DNS resolution. The dig command will return the IP addresses assigned to the VPC Interface endpoint running in
VPC Cloud (your IP&rsquo;s will be different): dig +short s3.us-east-1.amazonaws.com</li>
</ol>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>The IP addresses returned are the VPC endpoint IP addresses, NOT the Resolver IP addresses you pasted from your text
editor. The IP addresses of the Resolver endpoint and the VPC endpoint look similar because they are all from the VPC
Cloud CIDR block.</p>
  </div>
</details>
<p><a href="#R-image-4a20f862e67985aba678750cbba8e06c" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/dig.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4a20f862e67985aba678750cbba8e06c"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/dig.png"></a></p>
<ol start="3">
<li>Navigate to the VPC menu (Endpoints section), select the S3 Interface endpoint. Click the Subnets tab and verify that
the IP addresses returned by Dig match the VPC endpoint:</li>
</ol>
<p><a href="#R-image-67ab3884337e2d2cf221ed3ed55bd6d4" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/subnet.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-67ab3884337e2d2cf221ed3ed55bd6d4"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/subnet.png"></a></p>
<ol start="4">
<li>Return to your shell and use the AWS CLI to test listing your S3 buckets:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>aws s3 ls --endpoint-url https://s3.us-east-1.amazonaws.com</code></pre></div>
<p><a href="#R-image-a82acf6bca65f33fb799cd9683efbc2d" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/endpoint.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a82acf6bca65f33fb799cd9683efbc2d"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/endpoint.png"></a></p>
<ol start="5">
<li>Terminate your Session Manager session:</li>
</ol>
<p><a href="#R-image-361ffa745f0c701fd69ad1fd99d7eadc" class="lightbox-link"><img alt="create rule" class="lazy lightbox figure-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/terminal.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-361ffa745f0c701fd69ad1fd99d7eadc"><img alt="create rule" class="lazy lightbox lightbox-image" loading="lazy" src="/images/5-Workshop/5.4-S3-onprem/terminal.png"></a></p>
<p>In this section you created an Interface endpoint for Amazon S3. This endpoint can be reached from on-premises through
Site-to-Site VPN or AWS Direct Connect. Route 53 Resolver outbound endpoints simulated forwarding DNS requests from
on-premises to a Private Hosted Zone running the cloud. Route 53 inbound Endpoints recieved the resolution request and
returned a response containing the IP addresses of the VPC interface endpoint. Using DNS to resolve the endpoint IP
addresses provides high availability in-case of an Availability Zone outage.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a id="logo" href="/FCJ-report-HUGO-SE192671/en/index.html">
  <svg
    id="Layer_1"
    data-name="Layer 1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 60 30"
    width="30%"
  >
    <defs>
      <style>
        .cls-1 {
          fill: #fff;
        }
        .cls-2 {
          fill: #f90;
          fill-rule: evenodd;
        }
      </style>
    </defs>
    <title>AWS-Logo_White-Color</title>
    <path
      class="cls-1"
      d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"
    ></path>
    <path
      class="cls-2"
      d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"
    ></path>
    <path
      class="cls-2"
      d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"
    ></path>
  </svg>
</a>

        </div>
        <search><form action="/FCJ-report-HUGO-SE192671/en/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/worklog/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/worklog/index.html">1. Worklog</a><ul id="R-subsections-07a34cea8d1864d4f57c95a03074a21e" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/proposal/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/proposal/index.html">2. Proposal</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/blogs/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/blogs/index.html">3. Translated Blogs</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/events/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/events/index.html">4. Events Attended</a><ul id="R-subsections-c468958590b5fb14d45faa0c9c2ebc68" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/index.html">5. Workshop</a><ul id="R-subsections-76a95478d6faadaa73cc014b99f0b473" class="collapsible-menu">
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/1-overview/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/1-overview/index.html">Introduction</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/2-prerequisites/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/2-prerequisites/index.html">Prerequiste</a></li>
            <li class="alwaysopen " data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/3-s3-vpc/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/3-s3-vpc/index.html">Access S3 from VPC</a><ul id="R-subsections-127447fbf48231991ce3c6c7d35e2c81" class="collapsible-menu"></ul></li>
            <li class="parent alwaysopen " data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/index.html">Access S3 from on-premises</a><ul id="R-subsections-5d438fe35572ae88f39b58e0215b34d3" class="collapsible-menu">
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.1-prepare/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.1-prepare/index.html">Prepare the environment</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.2-create-interface-endpoint/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.2-create-interface-endpoint/index.html">Create an S3 Interface endpoint</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.3-test-endpoint/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.3-test-endpoint/index.html">Test the Interface Endpoint</a></li>
            <li class="active " data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html">On-premises DNS Simulation</a></li></ul></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/5-policy/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/5-policy/index.html">VPC Endpoint Policies</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/workshop/6-cleanup/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/workshop/6-cleanup/index.html">Clean up</a></li></ul></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/evaluation/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/evaluation/index.html">6. Self-Evaluation</a></li>
            <li class="" data-nav-url="/FCJ-report-HUGO-SE192671/en/feedback/index.html"><a class="padding" href="/FCJ-report-HUGO-SE192671/en/feedback/index.html">7. Sharing and Feedback</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
			<li class="R-languageswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-language"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-language">Language</label>
                  <select id="R-select-language">
                    <option id="R-select-language-vi" value="vi" data-url="/FCJ-report-HUGO-SE192671/workshop/4-s3-onprem/4.4-dns-simulation/index.html" lang="vi">Vietnamese</option>
                    <option id="R-select-language-en" value="en" data-url="/FCJ-report-HUGO-SE192671/en/workshop/4-s3-onprem/4.4-dns-simulation/index.html" lang="en" selected data-selected>English</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/FCJ-report-HUGO-SE192671/js/clipboard/clipboard.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/perfect-scrollbar/perfect-scrollbar.min.js?1764929016" defer></script>
    <script src="/FCJ-report-HUGO-SE192671/js/theme.js?1764929016" defer></script>
  </body>
</html>
